{% load i18n %}
<div class="create-ac-content" id="order-form">
  {% load i18n %}
  <form method="post" action="{% url "site:checkout:submit" %}">
    {% csrf_token %}
    <fieldset>
      <h2 class="login-title mb-3">{% trans "Order Information" %}</h2>
      <div class="row">
        <div class="form-group col-md-12 col-lg-12 ">
          <div class="customCheckbox cart_tearm">
            <input type="checkbox" class="form-check-input" id="delivery" name="delivery"
                   {% if delivery %}checked{% endif %}
                   hx-get="{% url 'site:checkout:delivery' %}"
                   hx-target="#order-form"
                   hx-swap="outerHTML"/>
            <label for="delivery"><strong>{% trans "Delivery" %}?</strong></label>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="form-group col-md-9 col-lg-9">
          {% if delivery %}
            <label for="payment">{% trans "Payment Type" %}<span class="required-f">*</span></label>
            <select id="payment" name="payment" required>
              <option value="" selected>{% trans "Select payment type" %}</option>
              {% for type in payment_types %}
                <option value="{{ type.value }}" label="{{ type.label }}"></option>
              {% endfor %}
            </select>
          {% else %}
            <select id="payment" name="payment" disabled>
              <option value="0" selected>{% trans "No delivery" %}</option>
            </select>
          {% endif %}
        </div>
      </div>
      <div class="row">
        <div class="form-group col-md-9 col-lg-9">
          {% if delivery %}
            <label for="address">{% trans "Address" %}<span class="required-f">*</span></label>
            <select id="address" name="address" required>
              <option value="" selected>{% trans "Select an address" %}</option>
              {% for address in addresses %}
                <option value="{{ address.id }}" label="{{ address }}"></option>
              {% endfor %}
            </select>
          {% else %}
            <select id="address" name="address" disabled>
              <option value="0" selected>{% trans "No delivery" %}</option>
            </select>
          {% endif %}

        </div>
        <div class="form-group col-md-3 col-lg-3">
          {% if delivery %}
            <label for="add_address">{% trans "Add Address" %}</label>
            <a id="add_address" data-bs-toggle="modal"
               class="w-100 p-2 btn btn-success rounded"
               hx-get="{% url 'site:checkout:add-address-form' %}"
               hx-target="#addAddressModal"
               hx-swap="outerHTML"
            >
              {% trans "Add address" %}
            </a>
          {% endif %}
        </div>
      </div>
      {% if not user.first_name or not user.last_name %}
        <div class="row">
          <div class="form-group col-md-6 col-lg-6">
            <label for="first_name">{% trans "First Name" %}<span class="required-f">*</span></label>
            <input type="text" id="first_name" name="first_name" value="" required/>
          </div>
          <div class="form-group col-md-6 col-lg-6">
            <label for="last_name">{% trans "Last Name" %}<span class="required-f">*</span></label>
            <input type="text" id="last_name" name="last_name" value="" required/>
          </div>
        </div>
      {% endif %}
      <div class="row">
        <div class="form-group col-md-6 col-lg-6">
          <label for="cellphone">{% trans "Cellphone" %}<span class="required-f">*</span></label>
          <input type="tel" id="cellphone" name="cellphone" value="{{ phone }}"
                 placeholder="555-555-5555"
                 pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" required/>
        </div>
      </div>
      <div class="row">
        <div class="form-group col-md-12 col-lg-12 col-xl-12">
          <label for="info">{% trans "Order Extra Info" %}</label>
          <textarea name="info" id="info" class="form-control resize-both" rows="3"></textarea>
        </div>
      </div>
      <div class="row">
        <div class="form-group col-md-12 col-lg-12 col-xl-12 mb-0">
          {% if products_data %}
            <button name="make_order" id="make_order" type="submit"
                    class="w-100 p-2 btn btn-primary proceed-to-checkout rounded">{% trans "Make Order" %}
            </button>
          {% else %}
            <button name="make_order" id="make_order" disabled
                    class="w-100 p-2 btn btn-primary proceed-to-checkout rounded">{% trans "Empty Cart" %}
            </button>
          {% endif %}
        </div>
      </div>
    </fieldset>
  </form>
</div>
