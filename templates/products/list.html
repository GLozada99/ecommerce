{% extends 'core/base.html' %}
{% block content %}
  <section class="py-5 sm:py-7 bg-blue-100">
    <div class="container max-w-screen-xl mx-auto px-4">
      <h2 class="text-3xl font-semibold mb-2">{{ current_category.name }}</h2>
      <ol class="inline-flex flex-wrap text-gray-600 space-x-1 md:space-x-3 items-center">
        <li class="inline-flex items-center">
          <a class="text-gray-600 hover:text-blue-600" href="{{ request.path }}">All items</a>
          {% if current_category.name %}
            <i class="ml-3 text-gray-400 fa fa-chevron-right"></i>
          {% endif %}
        </li>
        <li class="inline-flex items-center" aria-current="page">
          <a class="text-gray-600 hover:text-blue-600"
             href="{{ request.path }}?category={{ current_category.slug }}&order_by={{ current_order_by }}&page=1">
            {{ current_category.name }}
          </a>
        </li>
      </ol>
      <!-- breadcrumbs end -->
    </div><!-- /.container -->
  </section>
  <section class="py-12">
    <div class="container max-w-screen-xl mx-auto px-4">

      <div class="flex flex-col md:flex-row -mx-4">
        <aside class="md:w-1/3 lg:w-1/4 px-4">

          <!-- filter wrap -->

          <a class="md:hidden mb-5  w-full text-center px-4 py-2 inline-block text-lg text-gray-700 bg-white shadow-sm border border-gray-200 rounded-md hover:bg-gray-100 hover:text-blue-600"
             href="#">
            Filter by
          </a>

          <div class="hidden md:block px-6 py-4 border border-gray-200 bg-white rounded shadow-sm">
            <h3 class="font-semibold mb-2">Categories</h3>

            <ul class="text-gray-500 space-y-1">
              {% for category in categories %}
                <li>
                  <a class="hover:text-blue-600 hover:underline
                    {% if category.name == current_category.name %}text-blue-900 font-bold{% else %}{% endif %}"
                     href="{{ request.path }}?category={{ category.slug }}&order_by={{ current_order_by }}&page=1">
                    {{ category.name }}
                  </a>
                </li>
              {% endfor %}
            </ul>

            <hr class="my-4">

            <h3 class="font-semibold mb-2">Sort by</h3>
            <ul class="text-gray-500 space-y-1">
              {% for option in order_by_options %}
                <li>
                  <a class="hover:text-blue-600 hover:underline
                    {% if option.field_name == current_order_by %}text-blue-900 font-bold{% else %}{% endif %}"
                     href="{{ request.path }}?category={{ current_category.slug }}&order_by={{ option.field_name }}&page={{ page_obj.number }}">
                    {{ option.show_name }}
                  </a>
                </li>
              {% endfor %}
            </ul>

          </div>
          <!-- filter wrap -->

        </aside> <!-- col.// -->
        <section class="md:w-2/3 lg:w-3/4 px-4">
          <main class="">
            {% if products %}
              <div
                  class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 {% if products %}grid-cols-1{% endif %} gap-8">
                {% for product in products %}
                  <div>
                    <!-- COMPONENT: PRODUCT CARD -->
                    <article class="shadow-sm rounded bg-white border border-gray-200">
                      <a href="#" class="block relative p-1">
                        <img src="{{ product.principal_image_url }}" class="h-auto w-auto"
                             alt="Product title here">
                      </a>
                      <div class="p-4 border-t border-t-gray-400">

                        <a href="#" class="block text-gray-600 mb-3 hover:text-blue-500">
                          {{ product.name }}
                        </a>
                        <p class="font-semibold">${{ product.current_price }}</p>
                        <div>
                          <a class="px-4 py-2 inline-block text-white text-center bg-blue-600 border border-transparent rounded-md hover:bg-blue-700"
                             href="#">
                            Add to cart
                          </a>
                        </div>
                      </div>
                    </article>
                    <!-- COMPONENT: PRODUCT CARD //END -->
                  </div>
                {% endfor %}
                {% else %}
                {% include 'core/not-found.html' %}
                {% block not_found %}
                {% endblock %}

              </div> <!-- grid .// -->
            {% endif %}
          </main>  <!-- col.// -->
          <nav class="pt-6 flex flex-col items-center">
            <ul class="pagination-blue pagination pagination-gradient">
              {% if page_obj.has_previous %}
                <li class="page-item">
                  <a class="page-link" aria-label="First"
                     href="{{ request.path }}?category={{ current_category.slug }}&order_by={{ current_order_by.field_name }}&page=1">
                    <span class="material-icons"><<</span>
                  </a>
                </li>

                <li class="page-item">
                  <a class="page-link" aria-label="Previous"
                     href="{{ request.path }}?category={{ current_category.slug }}&order_by={{ current_order_by.field_name }}&page={{ page_obj.previous_page_number }}">
                    <span class="material-icons"><</span>
                  </a>
                </li>
              {% endif %}
              <li class="page-item active"><a class="page-link">{{ page_obj.number }}</a></li>
              {% if page_obj.has_next %}
                <li class="page-item">
                  <a class="page-link" aria-label="Next"
                     href="{{ request.path }}?category={{ current_category.slug }}&order_by={{ current_order_by.field_name }}&page={{ page_obj.next_page_number }}">
                    <span class="material-icons">></span>
                  </a>
                </li>
                <li class="page-item">
                <a class="page-link" aria-label="Last"
                   href="{{ request.path }}?category={{ current_category.slug }}&order_by={{ current_order_by.field_name }}&page={{ page_obj.paginator.num_pages }}">
                <span class="material-icons">>></span>
              {% endif %}
              </a>
              </li>
            </ul>
          </nav>
        </section>

      </div> <!-- grid.// -->
      <section class="">

      </section>
    </div> <!-- container .// -->
  </section>

{% endblock %}
